<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="" />
<meta name="author" content="Maxim Sokhatsky" />
<title>BPE</title>
<link rel="stylesheet" href="https://n2o.dev/blank.css"/>
<link rel="shortcut icon" type="image/x-icon" href="https://n2o.dev/img/favicon.ico"/>
<link rel="apple-touch-icon" sizes="180x180" href="https://n2o.dev/img/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://n2o.dev/img/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://n2o.dev/img/favicon-16x16.png"/>
<link rel="manifest" href="https://n2o.dev/img/site.webmanifest"/>
</head>
<body>
<nav>
  <a href="https://n2o.dev/ua/">DEV</a>
  <a href="https://bpe.n2o.dev/" style="background:#ededed;">BPE</a>
  <div class="dropdown">
    <a onclick="drop()" class="dropbtn">UA</a>
    <div id="dropdown" class="dropdown-content">
      <a href="https://n2o.dev/deps/bpe/man/ua/index.html">UA</a>
      <a href="https://n2o.dev/deps/bpe/man/de/index.html">DE</a>
      <a href="https://bpe.n2o.dev/">EN</a>
    </div>
  </div>
</nav>
<header>
  <a href="https://github.com/synrc/bpe"><h1 style="border-left: none;margin-right:10px;">üí†</h1></a>
  <h1>BPE</h1>
</header>
<aside>
  <article>
    <section>
      <h3>–°–ò–ù–û–ü–°–ò–°</h3>
      <div>
        –ë—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å–∏ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–∞ (–ë–ü–ü) –≤–∏–∑–Ω–∞—á–∞—é—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
        –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –≤–∏—Ä–æ–±–Ω–∏—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ –∑–≥—ñ–¥–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É BPMN,
        —Ç–∞ —Å–∏—Å—Ç–µ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª. –ë–ü–ü –∑–±–µ—Ä—ñ–≥–∞—î
        —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω–æ —É—Å—ñ –∫—Ä–æ–∫–∏ –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—ñ–≤ —É —Å—É—á–∞—Å–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ
        –¥–∞–Ω–∏—Ö KVS –Ω–∞ –±–∞–∑—ñ RocksDB.
      </div>
      <figure>
        <code>
 $ mad get bpe &#38;&#38; cd bpe
 $ mad com pla rep
 &#62; bpe:start(bpe_account:def(),[]).
        </code>
      </figure>
    </section>
    <section>
      <h3>–ú–û–î–£–õ–Ü</h3>
      <div>
        <ul>
          <li><a href="bpe.htm">BPE</a></li>
          <li><a href="task.htm">TASK</a></li>
          <li><a href="event.htm">EVENT</a></li>
        </ul>
      </div>
      <br />
      <div>
        JUL 2019 ¬© <a href="https://github.com/5HT">5HT</a> ISC<br />
        VER 6.7 6.5 6.4
      </div>
    </section>
  </article>
</aside>
<main>
<article>
  <section>                                                         
    <h3>–°—Ç–∞–Ω–¥–∞—Ä—Ç ISO 19510</h3>
    <p>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—É—Ç–Ω–æ—Å—Ç–µ–π BPMN –≤ BPE:</p>
    <p>beginEvent ‚Äî –ø–æ—á–∞—Ç–∫–æ–≤–∞ –ø–æ–¥—ñ—è<br/>
       subProcess ‚Äî –≤–∏–∫–ª–∏–∫ –ø—ñ–¥–ø—Ä–æ—Ü–µ—Å—É<br/>
       gateway ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è<br/>
       exclusiveGateway ‚Äî —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è<br/>
       parallelGateway ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è<br/>
       eventBasedGateway ‚Äî —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è –∑–∞–ø—É—â–µ–Ω–µ –ø–æ–¥—ñ—î—é<br/>
       messageEvent ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —á–µ—Ä–≥—É Erlang-–ø—Ä–æ—Ü–µ—Å—É<br/>
       messageFlow ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —á–µ—Ä–≥—É KVS<br/>
       sequenceFlow ‚Äî —Ä–µ–±—Ä–æ –º—ñ–∂ –∑–∞–¥–∞—á–æ—é —Ç–∞/–∞–±–æ —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è–º<br/>
       boundaryEvent ‚Äî —Ç–∞–π–º–∞—É—Ç —É—Å—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É<br/>
       timeoutEvent ‚Äî –∞–≤—Ç–æ–ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ –ë–ü<br/>
       endEvent ‚Äî –∫—ñ–Ω—Ü–µ–≤–∞ –ø–æ–¥—ñ—è<br/>
       userTask ‚Äî –≤–µ–±-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á<br/>
       serviceTask ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º —è–∫–∏–π –º–∏—Ç—Ç—î–≤–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è<br/>
       sendTask ‚Äî –∫—Ä–æ–∫, —è–∫–∏–π —ñ–Ω–∫–∞–ø—Å—É–ª—é—î KVS #writer<br/>
       receiveTask ‚Äî –∫—Ä–æ–∫, —è–∫–∏–π —ñ–Ω–∫–∞–ø—Å—É–ª—é—î KVS #reader<br/>
    </p>
  </section>  
  <section>
    <h3>–ü—Ä–∏–∫–ª–∞–¥ —Å–µ—Å—ñ—ó –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</h3>
    <figure>
      <code>
&#62; bpe:start(bpe_account:def(),[]).
Process "1562195753535380000" spawned as &#60;0.139.0&#62;.
{ok,"1562195753535380000"}

&#62; bpe:complete("1562195753535380000").
Process: "1562195753535380000" Task: 'Created' Targets: ['Init']
Target: 'Init' Status: reply Reason: unknown_task
{unknown_task,'Init'}

&#62; bpe:hist("1562195753535380000").
[ {hist,{1,"1562195753535380000"},
    feed,[],[],[],[],'IBAN Account',
    {task,'Init'},
    [],
    {{2019,7,4},{2,13,43}}},
  {hist,{0,"1562195753535380000"},
    feed,[],[],[],[],'IBAN Account',
    {task,'Created'},
    [],
    {{2019,7,4},{2,13,7}}}]

&#62; bpe:head("1562195753535380000").
{hist,{1,"1562195753535380000"},
   feed,[],[],[],[],'IBAN Account',
   {task,'Init'},
   [],
   {{2019,7,4},{2,13,43}}}

&#62; supervisor:which_children(bpe_otp).
[{"1562195753535380000",&#60;0.139.0&#62;,worker,[bpe_proc]}]
      </code>
    </figure>
    
    <figcaption>–Ø–∫ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ KVS</figcaption>
    <figure>
      <code>
&#62; kvs:all(writer).
[{writer,"/bpe/proc",1,[],[],[]},
 {writer,"/bpe/hist/1562195753535380000",2,[],[],[]}]

&#62; kvs:get("/bpe/hist/1562195753535380000",{1,"1562195753535380000"}).
{ok,{hist,{1,"1562195753535380000"},
      feed,[],[],[],[],'IBAN Account',
      {task,'Init'},
      [],
      {{2019,7,4},{2,16,7}}}}
      </code>
    </figure>
  </section>
  <section>
    <h3>–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è BPMN</h3>
    
    <p>–¶—è —Å—Ö–µ–º–∞ –æ—Ö–æ–ø–ª—é—î 80% –≤—Å—ñ—Ö —Ä–æ–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –ª–∏—à–µ 20% —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ–∫—Ä–∏—Ç—Ç—è.
   –ú–∏ –Ω–∞–∑–∏–≤–∞—î–º–æ —Ü–µ –õ–µ–≥–∫–∏–º BPMN, –∞–±–æ BPE.
    </p>
    <figcaption>–õ–µ–≥–∫–∏–π BPMN</figcaption>
    <figure>
      <code>
-type bst()    :: binary() | string() | atom().
-type procId() :: [] | integer() | {atom(),any()}.
-type histId() :: [] | integer() | {atom()|string(),any()}.

-record(hist, { id        = [] :: histId(),
                container = feed :: [] | atom(),
                feed_id   = [] :: any(),
                prev      = [] :: [] | integer(),
                next      = [] :: [] | integer(),
                feeds     = [] :: list(),
                name      = [] :: [] | binary(),
                task      = [] :: [] | {atom()|string(),any()},
                docs      = [] :: list(tuple()),
                time      = [] :: term() }).

-type tasks() :: #task{} | #serviceTask{} | #userTask{}
                 | #receiveTask{} | #beginEvent{} | #endEvent{}.

-type events() :: #messageEvent{} | #boundaryEvent{}
                  | #timeoutEvent{}.

-record(process, { id            = [] :: procId(),
                   container     = feed :: [] | atom(),
                   feed_id       = [] :: [] | term(),
                   prev          = [] :: [] | integer(),
                   next          = [] :: [] | integer(),
                   name          = [] :: [] | bst(),
                   feeds         = [] :: list(),
                   roles         = [] :: list(),
                   tasks         = [] :: list(tasks()),
                   events        = [] :: list(events()),
                   hist          = [] :: [] | term(),
                   flows         = [] :: list(#sequenceFlow{}),
                   rules         = [] :: [] | term(),
                   docs          = [] :: list(tuple()),
                   options       = [] :: term(),
                   task          = 'Created' :: [] | atom(),
                   timer         = [] :: [] | reference(),
                   notifications = [] :: [] | term(),
                   result        = [] :: [] | binary(),
                   started       = [] :: [] | calendat:datetime(),
                   beginEvent    = [] :: [] | atom(),
                   endEvent      = [] :: [] | atom()}).
      </code>
    </figure>
  </section>
  <section>
  <h3>–ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–æ—Ü–µ—Å—ñ–≤</h3>
  <figcaption>–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É</figcaption>
  <figure>
      <code>
-module(bpe_account).
-compile(export_all).
def() -&#62;
  #process { name = 'IBAN Account',
  flows = [
    #sequenceFlow { source='Created',   target='Init'},
    #sequenceFlow { source='Init',      target='Upload'},
    #sequenceFlow { source='Upload',    target='Payment'},
    #sequenceFlow { source='Payment',   target=['Signatory','Process']},
    #sequenceFlow { source='Process',   target=['Process','Final']},
    #sequenceFlow { source='Signatory', target=['Process','Final']} ],
  tasks = [
    #beginEvent  { name='Created',   module = bpe_account },
    #userTask    { name='Init',      module = bpe_account },
    #userTask    { name='Upload',    module = bpe_account },
    #userTask    { name='Signatory', module = bpe_account },
    #serviceTask { name='Payment',   module = bpe_account },
    #serviceTask { name='Process',   module = bpe_account }, 
    #endEvent    { name='Final',     module = bpe_account } ],
  beginEvent = 'Created',
  endEvent   = 'Final',
  events = [ #messageEvent{name='PaymentReceived'} ] }.
      </code>
    </figure>
  </section>
  <section>
    <a name="plugin"></a>
    <h3>–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è</h3>
    <p>–ö–æ–º–ø–∞–Ω—ñ—ó, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å BPE:
    </p>
    <div>
      <ul>
        <li><a href="https://pb.ua/depozit">pb.ua/depozit</a> ‚Äî –ê–¢ –ö–ë "–ü—Ä–∏–≤–∞—Ç–ë–∞–Ω–∫"</li>
        <li><a href="https://nynja.io">nynja.io</a> ‚Äî NYNJA, Inc.</li>
        <li><a href="http://quanterall.com">quanterall.com</a> ‚Äî Quanterall, OOD.</li>
      </ul>
      <br /><br />
    </div>
  </section>
  <section>
    <a name="plugin"></a>
    <h3>–î–æ–ø–∏—Å—É–≤–∞—á—ñ</h3>
    <div>
      <ul>
        <li><a href="https://github.com/5HT">5HT</a> ‚Äî –ù–∞–º–¥–∞–∫ –¢–æ–Ω–ø–∞</li>
      </ul>
      <br /><br />
    </div>
  </section>
</article>
</main>
<footer>
  –ó—Ä–æ–±–ª–µ–Ω–æ –∑ –ª—é–±–æ–≤'—é <span class="heart">‚ù§</span> –¥–æ N2O
</footer>
<script>function drop(){document.getElementById("dropdown").classList.toggle("show");}</script>
</body>
</html>
